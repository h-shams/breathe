(()=>{"use strict";const e={anxiety:{name:"Anxiety",times:{in:4,hold:7,out:8},count:4},anger:{name:"Anger",times:{in:2,hold:3.5,out:4},count:5},irritation:{name:"irritation",times:{in:2,hold:3.5,out:4},count:5},scaring:{name:"Scaring",times:{in:2,hold:3.5,out:4},count:5},saddnes:{name:"Saddnes",times:{in:2,hold:3.5,out:4},count:5}},t=document.querySelector(".spinner"),n=document.querySelectorAll(".spinner__spot"),o=document.querySelector(".spinner__content-inner"),r=document.querySelector(".spinner__content-text--old"),s=document.querySelector(".spinner__content-text--new"),i=document.querySelector(".timer"),c=document.querySelector(".spinner-button-wrapper"),a=document.querySelector(".states-section");let l,u,d,m,p=null,y=null;function h(e){r.innerHTML!==e&&(s.innerHTML=e,o.classList.add("spinner__content-inner--text-change"),setTimeout((()=>{r.innerHTML=e,o.classList.remove("spinner__content-inner--text-change")}),250))}function v(e){let t=Math.floor(e/60);t<10&&(t="0"+t);let n=Math.floor(e)%60;n<10&&(n="0"+n);const o=`PT${t}M${n}S`;i.setAttribute("datetime",o),i.innerHTML=`${t}:${n}`}let f=!1,g=null;function L(){cancelAnimationFrame(g),t.style.setProperty("--grow-time","1.5s"),t.classList.remove("spinner--spin"),f=!1,S(),h("start"),w("close"),q("visible")}function S(){t.classList.remove("spinner--grow")}function w(e){switch(e){case"open":c.classList.add("spinner-button-wrapper--expand");break;case"close":c.classList.remove("spinner-button-wrapper--expand")}}function q(e){switch(e){case"hidden":a.classList.add("states-section--hidden");break;case"visible":a.classList.remove("states-section--hidden")}}"serviceWorker"in navigator?navigator.serviceWorker.register("./sw.bundle.js").then((e=>{console.log("service worker successfully registred")})).catch((e=>{console.log("error while regitering service worker"),console.log(e)})):console.log("service worker is not available");const _=[...document.querySelectorAll(".state")];_.forEach((e=>{e.addEventListener("click",k)}));let b=null;function k(o){const r=o.target.dataset.value;b=r,o.target.classList.add("state--active"),_.forEach((e=>{e.dataset.value!==r&&e.classList.remove("state--active")})),function(t){if(!e[t])return p=null,h("choose a state"),null;p!==t&&(L(),p=t,y=e[t],l=y.times.in,u=y.times.hold,d=y.times.out,m=l+u+d)}(b),function(){const e=[0,l/m*360,(l+u)/m*360];n.forEach(((t,n)=>{const o=`rotate(${e[n]}deg)`;let r;if(t.style.transform){const e=/rotate\(-?\d{1,3}(\.\d+)?deg\)/;r=t.style.transform.replace(e,o)}else r=getComputedStyle(t).transform+o;t.style.transform=r})),t.style.setProperty("--rotate-time",m+"s"),t.style.setProperty("--grow-time",.93*Math.min(l,d)+"s"),h("start"),v(m*y.count)}()}document.querySelector(".spinner__content-inner").addEventListener("click",(()=>{!function(){if(!y)return;if(f)return;let e,n,o=1;f=!0,t.classList.add("spinner--spin"),w("open"),q("hidden"),requestAnimationFrame((function r(s){void 0===e&&(e=s),void 0===n&&(n=s);const i=(s-e)/1e3,c=Math.floor((s-n)/1e3);v(Math.floor(m*y.count-c)),i>0&&i<l?(t.style.setProperty("--grow-time",.93*l+"s"),h("breathe in"),t.classList.add("spinner--grow")):l<i&&i<l+u?h("hold"):(t.style.setProperty("--grow-time",.93*d+"s"),h("breathe out"),S()),i>=m&&(e=s,o++),o>y.count&&L(),f&&(g=requestAnimationFrame(r))}))}()})),document.querySelector(".spinner-button").addEventListener("click",(()=>{L()}));const M=document.querySelector(".overlay");M.querySelectorAll(".modal").forEach((e=>{e.querySelector(".modal__button").addEventListener("click",(()=>function(e,t){e.classList.remove("modal--open"),M.classList.remove("overlay--open")}(e)))}))})();