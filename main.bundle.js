(()=>{"use strict";const e={anxiety:{name:"Anxiety",times:{in:4,hold:7,out:8},count:4},anger:{name:"Anger",times:{in:2,hold:3.5,out:4},count:5},irritation:{name:"irritation",times:{in:2,hold:3.5,out:4},count:5},scaring:{name:"Scaring",times:{in:2,hold:3.5,out:4},count:5},saddnes:{name:"Saddnes",times:{in:2,hold:3.5,out:4},count:5}},t=document.querySelector(".spinner"),n=document.querySelectorAll(".spinner__spot"),r=document.querySelector(".spinner__content-inner"),s=document.querySelector(".spinner__content-text--old"),o=document.querySelector(".spinner__content-text--new");let i,c,a,l,u=null,m=null;function d(e){s.innerHTML!==e&&(o.innerHTML=e,r.classList.add("spinner__content-inner--text-change"),setTimeout((()=>{s.innerHTML=e,r.classList.remove("spinner__content-inner--text-change")}),250))}let g=!1;let y=null;function p(){cancelAnimationFrame(y),t.style.setProperty("--grow-time","1.5s"),t.classList.remove("spinner--spin"),g=!1,h(),d("start")}function h(){t.classList.remove("spinner--grow")}"serviceWorker"in navigator?navigator.serviceWorker.register("./sw.bundle.js").then((e=>{console.log("service worker successfully registred")})).catch((e=>{console.log("error while regitering service worker"),console.log(e)})):console.log("service worker is not available");const v=[...document.querySelectorAll(".state")];v.forEach((e=>{e.addEventListener("click",_)}));let f=null;function _(r){const s=r.target.dataset.value;f=s,r.target.classList.add("state--active"),v.forEach((e=>{e.dataset.value!==s&&e.classList.remove("state--active")})),function(t){if(!e[t])return u=null,d("choose a state"),null;u!==t&&(p(),u=t,m=e[t],i=m.times.in,c=m.times.hold,a=m.times.out,l=i+c+a)}(f),function(){const e=[0,i/l*360,(i+c)/l*360];n.forEach(((t,n)=>{const r=`rotate(${e[n]}deg)`;let s;if(t.style.transform){const e=/rotate\(-?\d{1,3}(\.\d+)?deg\)/;s=t.style.transform.replace(e,r)}else s=getComputedStyle(t).transform+r;t.style.transform=s})),t.style.setProperty("--rotate-time",l+"s"),t.style.setProperty("--grow-time",.93*Math.min(i,a)+"s"),d("start")}()}document.querySelector(".spinner__content-inner").addEventListener("click",(e=>{m&&(g?p():function(){let e,n=1;g=!0,t.classList.add("spinner--spin"),requestAnimationFrame((function r(s){void 0===e&&(e=s);const o=(s-e)/1e3;o>0&&o<i?(t.style.setProperty("--grow-time",.93*i+"s"),d("breathe in"),t.classList.add("spinner--grow")):i<o&&o<i+c?d("hold"):(t.style.setProperty("--grow-time",.93*a+"s"),d("breathe out"),h()),o>=l&&(e=s,n++),n>m.count&&p(),g&&(y=requestAnimationFrame(r))}))}())}))})();